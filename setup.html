<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syllabus Pulse - Setup</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="style/setup.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsQR/1.4.0/jsQR.min.js"></script>
</head>
<body>
    <div id="setupWizard" class="wizard-overlay">
        <!-- Page 1: Welcome -->
        <div id="wizardStep1" class="wizard-panel">
            <h2>Welcome to Syllabus Pulse</h2>
            <p>Track your study progress easily.</p>
            <div class="wizard-buttons">
                <button class="btn btn-primary" onclick="showWizardStep(2)">Continue</button>
            </div>
        </div>
        <!-- Page 2: Sync Setup -->
        <div id="wizardStep2" class="wizard-panel hidden">
            <h2>Your Data is Saved Locally</h2>
            <p>Optionally enable cross-device sync for advanced users.</p>
            <div class="wizard-buttons">
                <button class="btn btn-primary" onclick="saveSyncSettings(); showWizardStep(3)">Save Locally</button>
                <button class="btn" onclick="openSyncModal()">Advanced</button>
            </div>
        </div>
        <!-- Page 3: PIN Setup -->
        <div id="wizardStep3" class="wizard-panel hidden">
            <h2>Create a 4-digit PIN</h2>
            <p>Protect your app with a secure PIN.</p>
            <div class="pin-display">
                <span id="wizardPinDigit1"></span>
                <span id="wizardPinDigit2"></span>
                <span id="wizardPinDigit3"></span>
                <span id="wizardPinDigit4"></span>
            </div>
            <div class="pin-pad">
                <button class="pin-btn" onclick="enterWizardPinDigit('1')">1</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('2')">2</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('3')">3</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('4')">4</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('5')">5</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('6')">6</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('7')">7</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('8')">8</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('9')">9</button>
                <button class="pin-btn clear-btn" onclick="clearWizardPin()">C</button>
                <button class="pin-btn" onclick="enterWizardPinDigit('0')">0</button>
                <button class="pin-btn submit-btn" onclick="completeSetup()">âœ“</button>
            </div>
            <div id="wizardPinError" class="pin-error hidden">PIN must be 4 digits</div>
            <div class="wizard-buttons">
                <button class="btn" onclick="showWizardStep(2)">Back</button>
            </div>
        </div>
        <!-- Sync Modal -->
        <div id="syncModal" class="modal-overlay hidden">
            <div class="modal">
                <div class="modal-header">
                    <h3>GitHub Sync Setup</h3>
                    <button class="btn-close" onclick="closeSyncModal()"><i class="ri-close-line"></i></button>
                </div>
                <div class="modal-content">
                    <div class="form-group">
                        <label class="form-label">GitHub Personal Access Token</label>
                        <input type="password" id="wizardGithubToken" class="form-input" placeholder="ghp_xxxxxxxxxxxx">
                        <div class="form-help">
                            <a href="https://github.com/settings/tokens" target="_blank">Create token here</a> with 'gist' scope
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Gist ID (optional)</label>
                        <input type="text" id="wizardGistId" class="form-input" placeholder="Leave empty to create new">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Import Existing Setup</label>
                        <input type="file" id="qrUploadWizard" accept="image/*" class="hidden" onchange="importGistQR(event)">
                        <button class="btn btn-primary" onclick="document.getElementById('qrUploadWizard').click()">Import via QR</button>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-flex" onclick="saveSyncSettings(); closeSyncModal()">Save</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Toast Notification -->
        <div id="toast" class="toast hidden"></div>
    </div>

    <script src="script/setup.js"></script>
</body>
</html>